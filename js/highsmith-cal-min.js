var Highsmith=function(e,t){function i(e){return document.getElementById(e)}function s(e,t,n){var r=document.createElement(e);t=t||"";n=n||"";var i=t||"";r.id=t;r.className=i;r.innerHTML=n;return r}function o(){if(f.customDate&&l.value&&l.value!=""){return new Date(l.value)=="Invalid Date"?new Date:new Date(l.value)}else{return new Date}}function y(e){if(i(h)){M()}b();w()}function b(){if(!f.disableOffClicker){var e=s("div","highsmithCal--offClicker");if(!f.style.disable){var t={display:"block",position:"fixed",top:0+"px",left:0+"px",bottom:0+"px",right:0+"px",zIndex:"9999"};W(e,t)}document.body.appendChild(e);e.addEventListener("click",function(){M()})}}function w(){var e=s("div",h);E(e);S(e);k(e);L(e);e=O(e);document.body.appendChild(e);A();T();N()}function E(e){var t=f.style.month;var n=s("span","highsmithCal--month");var r=s("label","highsmithCal--month__decrement",f.style.globals.downArrowIcon);var i=s("label","highsmithCal--month__label",a[p]);var o=s("label","highsmithCal--month__increment",f.style.globals.upArrowIcon);r.addEventListener("click",function(){D()});o.addEventListener("click",function(){_()});x(n,i,o,r,t,e)}function S(e){var t=f.style.year;var n=s("span","highsmithCal--year");var r=s("label","highsmithCal--year__decrement",f.style.globals.downArrowIcon);var i=s("label","highsmithCal--year__label",d);var o=s("label","highsmithCal--year__increment",f.style.globals.upArrowIcon);r.addEventListener("click",function(){H()});o.addEventListener("click",function(){P()});x(n,i,o,r,t,e)}function x(e,t,n,r,i,s){if(!f.style.disable){var o={fontSize:i.fontSize,padding:i.padding,backgroundColor:i.bgColor,color:i.color,display:"block"};var u={width:i.toggleSize,height:i.toggleSize,cursor:"pointer"};var a={width:i.toggleSize,height:i.toggleSize,cursor:"pointer"};var l={width:i.labelSize,display:"inline-block"};W(t,l);W(r,a);W(n,u);W(e,o)}e.appendChild(r);e.appendChild(t);e.appendChild(n);s.appendChild(e)}function T(e){if(!i("highsmithCal--resetButton")&&f.resetDateButton){var t=s("span","highsmithCal--resetButton","reset");C(t,j)}}function N(e){if(!i("highsmithCal--killButton")&&f.killButton){var t=s("span","highsmithCal--killButton","remove calendar");C(t,q)}}function C(e,t){var n=f.style.buttons;if(!f.style.disable){var r={fontSize:n.fontSize,padding:n.padding,backgroundColor:n.bgColor,display:"block",cursor:"pointer"};W(e,r)}i("highsmithCal").appendChild(e);e.addEventListener("click",t)}function k(e){var t=f.style.days;var n=s("span","highsmithCal--daysLegend");if(!f.style.disable){var r={fontSize:t.fontSize,color:t.color,backgroundColor:t.legendBgColor,display:"block",textAlign:"left"};W(n,r)}var i=["S","M","T","W","Th","F","Sa"];for(var o=0;o<i.length;o++){var u=s("label","highsmithCal--daysLegend__label",i[o]);if(!f.style.disable){var r={padding:t.padding,width:t.width,height:t.height,color:t.legendColor,display:"inline-block",textAlign:"center"};W(u,r)}n.appendChild(u)}e.appendChild(n)}function L(e){var t=f.style.days;var n=s("span","highsmithCal--dayHolder");if(!f.style.disable){var r={fontSize:t.fontSize,backgroundColor:t.bgColor,display:"block",textAlign:"left"};W(n,r)}e.appendChild(n)}function A(){var e=f.style.days;var t=i("highsmithCal--dayHolder");t.innerHTML="";var n=(new Date(d,p,1)).getDay();for(var r=0;r<n;r++){var o=s("label","highsmithCal--dayHolder__nullLabel");if(!f.style.disable){var u={padding:e.padding,width:e.width,height:e.height,backgroundColor:e.nullBgColor,display:"inline-block",textAlign:"center",verticalAlign:"top"};W(o,u)}t.appendChild(o)}var a=new Date(d,p,1);var l=new Date(d,p+1,1);var c=(l-a)/(1e3*60*60*24);for(var h=1;h<=c;h++){var v=new Date(d,p,h);var m=v-new Date>0;var o=s("label","highsmithCal--dayHolder__label",h);if(!f.style.disable){var u={padding:e.padding,width:e.width,height:e.height,backgroundColor:e.bgColor,display:"inline-block",textAlign:"center",verticalAlign:"top",cursor:"pointer",transition:"all 0.2s"};if(h==(new Date).getDate()&&p==(new Date).getMonth()){u.border="1px solid "+e.color}W(o,u)}if(f.futureOnly){if(m){o.addEventListener("click",I);if(!f.style.disable){o.addEventListener("mouseenter",function(t){t.target.style.backgroundColor=e.legendBgColor});o.addEventListener("mouseleave",function(e){e.target.style.background="none"})}}else{o.style.opacity="0.2"}}else{o.addEventListener("click",I);o.addEventListener("mouseenter",function(t){t.target.style.backgroundColor=e.legendBgColor});o.addEventListener("mouseleave",function(e){e.target.style.background="none"})}t.appendChild(o)}}function O(e){var t=f.style.globals;var n=l.getBoundingClientRect();var r=n.top+document.body.scrollTop+n.height;if(!f.style.disable){var i={fontFamily:t.fontFamily,border:t.border,backgroundColor:t.bgColor,width:t.width,borderRadius:t.borderRadius,display:"block",position:"absolute",zIndex:"10000",top:r+"px",left:n.left+"px",textAlign:"center"};W(e,i)}return e}function M(){if(i("highsmithCal--offClicker")){i("highsmithCal--offClicker").remove()}if(i(h)){i(h).remove()}}function _(){p++;if(p>a.length-1){p=0;d++}B()}function D(){p--;if(p<0){p=a.length-1;d--}B()}function P(){d++;B()}function H(){d--;B()}function B(){i("highsmithCal--month__label").innerHTML=a[p];i("highsmithCal--year__label").innerHTML=d;A()}function j(){F();B()}function F(){var e=c;p=e.getMonth();d=e.getFullYear();v=e.getDate();m=e.getDay();g=(new Date(d,p,0)).getDate()}function I(e){var t=e.target.innerHTML;var n=String(p+1);t=("0"+t).slice(-2);n=("0"+n).slice(-2);var r;if(f.format=="mdy"){r=n+"/"+t+"/"+d}else if(f.format=="ymd"){r=d+"/"+n+"/"+t}else{r=t+"/"+n+"/"+d}l.value=r;l.innerHTML=r;M()}function q(){M();l.removeEventListener("click",y);l.readOnly=false}function R(){console.log(f)}function U(e,t){t=t||f;for(item in e){z(e,item,t)}}function z(e,t,n){if(typeof n[t]!="object"){n[t]=e[t]}else{U(e[t],n[t])}}function W(e,t){for(opt in t){e.s(opt,t[opt])}}var n={ltGray:"#F1F1F1",gray:"#DCDCDC",mdGray:"rgb(202, 201, 201)",dkGray:"#333333",white:"#FFFFFF"};var r={format:"mdy",customDate:false,killButton:false,resetDateButton:false,disableOffClicker:false,futureOnly:false,style:{disable:false,month:{bgColor:n.ltGray,color:n.dkGray,fontFamily:"Georgia, serif",fontSize:"16px",labelSize:"80%",padding:"4px",toggleSize:"10%"},year:{bgColor:n.ltGray,color:n.dkGray,fontFamily:"Georgia, serif",fontSize:"14px",labelSize:"60%",padding:"4px",toggleSize:"10%"},days:{bgColor:n.ltGray,color:n.dkGray,fontFamily:"Georgia, serif",fontSize:"13px",height:"16px",legendBgColor:n.gray,legendColor:n.dkGray,nullBgColor:n.mdGray,padding:"4px",width:"20px"},globals:{fontFamily:"Georgia, serif",bgColor:n.white,border:"1px solid "+n.ltGray,borderRadius:"2px",downArrowIcon:"&#8672;",upArrowIcon:"&#8674;",width:"200px"},buttons:{fontSize:"12px",padding:"4px"}}};var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var a=["January","February","March","April","May","June","July","August","September","October","November","December"];var f=r;U(t);var l=i(e);l.readOnly=true;var c=o();var h="highsmithCal";var p,d,v,m,g;Element.prototype.remove=function(){this.parentElement.removeChild(this)};Element.prototype.s=function(e,t){this.style[e]=t};l.addEventListener("click",y,false);F();return{kill:q,showOptions:R,updateOptions:U,removeCalendar:M}}
